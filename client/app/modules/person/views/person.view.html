<div flex layout="row" layout-align="center center">
  <a ui-sref="person.edit({ id: personCtrl.person.id })">
    <mh-avatar
      person="personCtrl.person"
      size="s"
      circle
      class="avatar">
    </mh-avatar>
  </a>
</div>

<div flex layout="column" layout-gt-sm="row">
  <div flex-gt-sm="50" layout="column">
    <mh-content>
      <div class="person-view-top">
        <div layout="row">
          <h1 flex>
            {{personCtrl.person.fullName}}
          </h1>
          <md-button flex="none" ui-sref="person.edit({ id: personCtrl.person.id })">
            <ng-md-icon size="18" icon="edit"> </ng-md-icon>
            <translate> Edit </translate>
           </md-button>
        </div>
        <div class="md-padding" ng-if="personCtrl.person.status.length">
          <ng-md-icon size="24" icon="label"></ng-md-icon>
          <span ng-repeat="status in personCtrl.person.status" class="tag status-tag" style="margin-right: 2px">
            {{ status }}
          </span>
          <span ng-repeat="tag in personCtrl.person.tags" class="tag">
              <md-chip>{{tag}}</md-chip>
          </span>
        </div>
      </div>
      <md-list>
        <md-list-item class="md-2-line" ng-repeat="(name,value) in personCtrl.person.contacts">
          <ng-md-icon icon="call" ng-if="$index === 0"></ng-md-icon>
          <div class="md-list-item-text" ng-class="{'md-offset': $index != 0 }">
            <h3> {{ value }} </h3>
            <p> {{ name }} </p>
          </div>
        </md-list-item>
        <md-list-item class="md-2-line" ng-repeat="address in personCtrl.person.addressList">
          <ng-md-icon icon="place" ng-if="$index === 0"></ng-md-icon>
          <div class="md-list-item-text" ng-class="{'md-offset': $index != 0 }">
            <h3>
              <a href="http://maps.google.de/maps?q={{address.value}}&t=h&z=17">
                {{ address.value }}
              </a>
            </h3>
            <p> {{ address.name }} </p>

          </div>
        </md-list-item>

        <md-list-item class="md-2-line" ng-if="personCtrl.person.emails.personal">
          <ng-md-icon icon="email" ></ng-md-icon>
          <div class="md-list-item-text">
            <h3> {{ personCtrl.person.emails.personal }} </h3>
            <p> EMail </p>
          </div>
        </md-list-item>

        <md-list-item class="md-2-line" ng-repeat="(name, value) in personCtrl.person.dates">
          <ng-md-icon icon="cake" ng-if="$index === 0"></ng-md-icon>
          <div class="md-list-item-text" ng-class="{'md-offset': $index != 0 }">
            <h3> {{ value | date: 'longDate'}} </h3>
            <p> {{ name }} </p>
          </div>
        </md-list-item>
      </md-list>
    </mh-content>
  </div>

  <mh-content flex-gt-sm="50" layout="column">
    <h2 translate> Notes </h2>
    <md-list>
      <md-list-item ng-repeat="note in personCtrl.notes">
        <ng-md-icon icon="{{personCtrl.icon(note.type)}}" ng-if="note.type"></ng-md-icon>
        <ng-md-icon icon="chat" ng-if="!note.type"></ng-md-icon>
        <div flex class="md-list-item-text">
          <p>
            <b>{{note.title}}</b>
            <small><span am-time-ago="note.created"></span></small>
          </p>
          <p>{{note.content}}</p>
        </div>
        <md-divider ng-if="!$last"></md-divider>
      </md-list-item>

    </md-list>

    <mh-note-create
      notable-type="Person"
      notable-id="{{personCtrl.person.id}}"
      new-note="personCtrl.newNote(note)"
      button-class="md-fab md-raised md-accent md-fab-floating-br">
    </mh-note-create>
  </mh-content>
</div>
