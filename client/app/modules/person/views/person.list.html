<div ng-controller="PersonListController as personCtrl" class="person-list">
  <dir-pagination-controls 
    boundary-links="true" 
    on-page-change="personCtrl.pageChanged(newPageNumber)"
    template-url="app/templates/dirPagination.html">
  </dir-pagination-controls>
  <md-list class="person-list">
   <md-list-item 
    flex layout="row"
    class="person-list-item"  
    dir-paginate="person in personCtrl.persons | itemsPerPage: gemConfig.pagination.pageSize" 
    total-items="personCtrl.totalPersons"
    >
      <mh-avatar person="person" size="xs" circle ui-sref="person.view({ id: person.id })" class="avatar"></mh-avatar>
      <div flex class="md-list-item-text">
          <h3><a class="simple-link" ui-sref="person.view({ id: person.id })">{{::person | formatName}}</a></h3>
          <span ng-repeat="status in person.status" class="tag status-tag">
            {{ status }}
          </span>
          <span ng-repeat="tag in person.tags" class="tag">
            {{ tag }}
          </span>
          <span class="text-muted">{{person.duties}}</span>
          <span class="text-muted" ng-if="person.contact.home">
              <ng-md-icon size="16" icon="phone"></ng-md-icon>
              <a href="tel:{{ ::person.contact.home }}">{{ ::person.contact.home }}</a>
          </span>
          <span class="text-muted" ng-if="person.contact.mobile">
              <ng-md-icon size="15" icon="stay_primary_portrait"></ng-md-icon>
              <a href="tel:{{ ::person.contact.mobile }}">{{ ::person.contact.mobile }}</a>
          </span>
          
      </div>
      <div>
        <md-button class="md-icon-button md-action-icon-button" tooltip="{{'Edit' | translate}}" aria-label="{{'Edit' | translate}}"
                  ui-sref="person.edit({ id: person.id })">
          <ng-md-icon icon="edit"></ng-md-icon>
        </md-button>
        <md-button class="md-icon-button md-action-icon-button" tooltip="{{'Delete' | translate}}" aria-label="{{'Delete' | translate}}"
                  ng-click="personCtrl.deletePerson(person)" href="#"
                  confirm="Delete “{{::person | formatName}}”?">
          <ng-md-icon icon="delete"></ng-md-icon>
        </md-button>
      </div>
    </md-list-item>
  </md-list>
  <!--
          <ul class="list-inline text-muted">
            <li ng-if="person.household" ns-popover ns-popover-template="app/modules/person/templates/popover-list.html"
                ns-popover-trigger="mouseenter" ns-popover-placement="bottom" ns-popover-timeout="0.2"
                ns-popover-theme="ns-popover-tooltip-theme">
              <ng-md-icon size="14" icon="face"></ng-md-icon>
              <a>{{ ::person.household.name }}</a>
            </li>
            <li ng-if="person.birthdate" title="{{'Birthdate' | translate}}">
              <ng-md-icon size="15" icon="cake"></ng-md-icon>
              {{::person.birthdate | date:medium}}
            </li>
            <li ng-if="person.email" title="{{'Email' | translate}}">
              <ng-md-icon size="15" icon="email"></ng-md-icon>
              <a href="mailto:{{ ::person.email }}">{{ ::person.email }}</a>
            </li>
            <li ng-if="person.contact.home" title="{{'Home phone' | translate}}">
              <ng-md-icon size="16" icon="phone"></ng-md-icon>
              <a href="tel:{{ ::person.contact.home }}">{{ ::person.contact.home }}</a>
            </li>
            <li ng-if="person.contact.work" title="{{'Work phone' | translate}}">
              <ng-md-icon size="16" icon="phone"></ng-md-icon>
              <a href="tel:{{ ::person.contact.work }}">{{ ::person.contact.work }}</a>
            </li>
            <li ng-if="person.contact.mobile" title="{{'Mobile phone' | translate}}">
              <ng-md-icon size="15" icon="stay_primary_portrait"></ng-md-icon>
              <a href="tel:{{ ::person.contact.mobile }}">{{ ::person.contact.mobile }}</a>
            </li>
            <li ng-if="person.contact.facebook" title="{{'Facebook' | translate}}">
              <a target="_blank" href="{{ ::person.contact.facebook | formatFacebookUrl }}">
                <ng-md-icon size="15" icon="facebook"></ng-md-icon>
              </a>
            </li>
            <li ng-if="person.contact.skype" title="{{'Skype' | translate}}">
              <a href="{{ ::person.contact.skype | formatSkypeUrl }}">
                <fa name="skype"></fa>
              </a>
            </li>
          </ul>
        </td>
      </div>
    </tr>
    </tbody>
  </table>-->
  <dir-pagination-controls boundary-links="true" 
                            template-url="app/templates/dirPagination.html">
  </dir-pagination-controls>
</div>
<a ui-sref="person.create">
  <md-button class="md-fab md-fab-floating-br md-accent" aria-label="New Report">
    <ng-md-icon icon="add"></ng-md-icon>
  </md-button>
</a>
